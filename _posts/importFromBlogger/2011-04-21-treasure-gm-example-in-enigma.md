---
layout: post
title: "Treasure GM example in Enigma"
description: ""
category: Enigma
tags: [Enigma,GameMaker]
---
{% include JB/setup %}
<div style="text-align: left;">Recently I have been trying to increase the number of example games that enigma supports while adding functions that are required to svn. However there are still some functions which need to remain in whitespace due to changes required in the compiler or elsewhere which makes them difficult to implement.</div><div><br></div><div>The first example is the treasure example which I believe was first released with game maker 7, its basically the original pacman but with different sprites and instead of using a script to wrap it uses the action_wrap function.</div><div><br></div><div>It requires renaming the sprite called monster into spr_monster, renaming the sound catch into snd_catch and the sound bonus into snd_bonus.</div><div><br></div><div>Then finally add the following definitions to enigma settings (engima settings -&gt; definitions)</div><div><div></div><blockquote><div><br></div><div>//1945 </div><div><br></div><div>void action_change_object(int changeInto, int performEvents) {</div><div>enigma::object_planar* const inst = ((enigma::object_planar*)enigma::instance_event_iterator-&gt;inst);</div><div>//instance_create(inst-&gt;x,inst-&gt;y,changeInto);</div><div>//instance_destroy();</div><div>} //warning don't use in a with statement! (massive memory leak)</div><div><br></div><div>void action_restart_game() { //game_restart(); </div><div>} </div><div><br></div><div>// Street Race</div><div><br></div><div>void action_highscore_show(int background,int border,double newColor,double otherColor,string font,int a,int b,int c,int d,int e,int f) {}</div><div><br></div><div>///////// PACMAN </div><div><br></div><div>void action_end_game() {</div><div>    //game_end();</div><div>} </div></blockquote><div></div></div><div><blockquote></blockquote>Screenshots running on mac using enigma r705:</div><div><a href="http://1.bp.blogspot.com/-U0lAk7iSSdE/TbCL8zujvAI/AAAAAAAAAAM/Ff9WyMD-3As/s1600/Screen%2Bshot%2B2011-04-21%2Bat%2B20.55.39.png" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img border="0" alt="" id="BLOGGER_PHOTO_ID_5598128213615426562" style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 301px; height: 320px;" src="http://1.bp.blogspot.com/-U0lAk7iSSdE/TbCL8zujvAI/AAAAAAAAAAM/Ff9WyMD-3As/s320/Screen%2Bshot%2B2011-04-21%2Bat%2B20.55.39.png" class=""></a></div><div>The original pacman example also works:</div><div><a href="http://2.bp.blogspot.com/-BSTYnst1opE/TbCM_IsnVPI/AAAAAAAAAAU/-zRl8nbeuXQ/s1600/Screen%2Bshot%2B2011-04-21%2Bat%2B21.00.30.png" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img border="0" alt="" id="BLOGGER_PHOTO_ID_5598129353115784434" style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 306px; height: 320px;" src="http://2.bp.blogspot.com/-BSTYnst1opE/TbCM_IsnVPI/AAAAAAAAAAU/-zRl8nbeuXQ/s320/Screen%2Bshot%2B2011-04-21%2Bat%2B21.00.30.png" class=""></a></div><div><br></div><div>There are however some problems, mainly the action_change_object which won't turn the monsters into scared state, and the high-score screen doesn't appear yet. But apart from that its fully playable.</div>